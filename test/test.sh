declare -i NWORKERS=3
declare -i NREDUCE=3

rm mapreduce-*

clear

echo "

        ███╗   ███╗ █████╗ ██████╗ ██████╗ ███████╗██████╗ ██╗   ██╗ ██████╗███████╗
        ████╗ ████║██╔══██╗██╔══██╗██╔══██╗██╔════╝██╔══██╗██║   ██║██╔════╝██╔════╝
        ██╔████╔██║███████║██████╔╝██████╔╝█████╗  ██║  ██║██║   ██║██║     █████╗  
        ██║╚██╔╝██║██╔══██║██╔═══╝ ██╔══██╗██╔══╝  ██║  ██║██║   ██║██║     ██╔══╝  
        ██║ ╚═╝ ██║██║  ██║██║     ██║  ██║███████╗██████╔╝╚██████╔╝╚██████╗███████╗
        ╚═╝     ╚═╝╚═╝  ╚═╝╚═╝     ╚═╝  ╚═╝╚══════╝╚═════╝  ╚═════╝  ╚═════╝╚══════╝

"

echo "============================================================================================"
echo "Starting master ...."
go run ../main/main-master.go $NREDUCE test*.txt &
echo "Started Master"
echo "============================================================================================"
sleep 5

for c in $(seq 1 $NWORKERS); do
        echo "Starting worker $c ...."
        go run ../main/main-worker.go &
        echo "Started worker $c"
        echo "============================================================================================"
done

for (( c=0; c<=$NWORKERS; c++ )); do
        wait
done

echo "

        ██████╗  ██████╗ ███╗   ██╗███████╗██╗
        ██╔══██╗██╔═══██╗████╗  ██║██╔════╝██║
        ██║  ██║██║   ██║██╔██╗ ██║█████╗  ██║
        ██║  ██║██║   ██║██║╚██╗██║██╔══╝  ╚═╝
        ██████╔╝╚██████╔╝██║ ╚████║███████╗██╗
        ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚══════╝╚═╝                         

"
